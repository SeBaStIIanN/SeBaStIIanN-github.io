<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Personal</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: Arial, sans-serif;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .hour-block {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .hour-block input[type="text"] {
            flex: 1;
            margin-left: 10px;
            padding: 5px;
            background-color: #333;
            color: white;
            border: 1px solid white;
            outline: none;
        }
        .hour-block input[type="checkbox"] {
            margin-left: 10px;
        }
        #progress-bar {
            width: 100%;
            background-color: #333;
            border-radius: 5px;
            margin: 20px 0;
        }
        #progress-bar div {
            width: 0;
            height: 20px;
            background-color: #4caf50;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Agenda Personal</h1>
        <div id="agenda"></div>
        <div id="progress-bar"><div></div></div>
        <p id="percentage">0%</p>
        <p id="complete-message" style="display:none;">¡Has completado tu agenda del día!</p>
    </div>

    <script>
        const startHour = 5;  // 5 AM
        const endHour = 28;   // 4 AM del día siguiente (28 representa las 4 AM)
        const totalHours = endHour - startHour;

        // Cargar la agenda
        function loadAgenda() {
            const agenda = document.getElementById("agenda");
            for (let i = startHour; i < endHour; i++) {
                const hour = i % 24;  // Ajustar formato de 24 horas
                const formattedHour = hour < 10 ? `0${hour}:00` : `${hour}:00`;

                const hourBlock = document.createElement("div");
                hourBlock.classList.add("hour-block");

                hourBlock.innerHTML = `
                    <label>${formattedHour}</label>
                    <input type="text" data-index="${i - startHour}" placeholder="Escribe tu actividad...">
                    <input type="checkbox" data-index="${i - startHour}">
                `;

                agenda.appendChild(hourBlock);
            }

            // Agregar el event listener para cambiar de campo al presionar Enter
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach((input, index) => {
                input.addEventListener('keydown', function(event) {
                    if (event.key === 'Enter') {
                        // Saltar al siguiente campo de texto si existe
                        const nextInput = inputs[index + 1];
                        if (nextInput) {
                            nextInput.focus();
                        }
                    }
                });
            });
        }

        // Actualizar el porcentaje de tareas completadas
        function updateProgress() {
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            const completed = Array.from(checkboxes).filter(checkbox => checkbox.checked).length;
            const percentage = Math.round((completed / totalHours) * 100);
            
            const progressBar = document.getElementById("progress-bar").firstElementChild;
            progressBar.style.width = `${percentage}%`;
            
            const percentageText = document.getElementById("percentage");
            percentageText.textContent = `${percentage}%`;

            if (percentage === 100) {
                document.getElementById("complete-message").style.display = 'block';
            } else {
                document.getElementById("complete-message").style.display = 'none';
            }
        }

        // Guardar los datos en LocalStorage
        function saveData() {
            const activities = [];
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach((input) => {
                activities.push(input.value);
            });
            localStorage.setItem('activities', JSON.stringify(activities));

            const completed = [];
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach((checkbox) => {
                completed.push(checkbox.checked);
            });
            localStorage.setItem('completed', JSON.stringify(completed));
        }

        // Cargar los datos desde LocalStorage
        function loadData() {
            const savedActivities = JSON.parse(localStorage.getItem('activities')) || [];
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach((input, index) => {
                if (savedActivities[index]) {
                    input.value = savedActivities[index];
                }
            });

            const savedCompleted = JSON.parse(localStorage.getItem('completed')) || [];
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach((checkbox, index) => {
                checkbox.checked = !!savedCompleted[index];
            });

            updateProgress();
        }

        document.addEventListener("DOMContentLoaded", () => {
            loadAgenda();
            loadData();

            // Event listener para checkboxes
            const checkboxes = document.querySelectorAll('input[type="checkbox"]');
            checkboxes.forEach((checkbox) => {
                checkbox.addEventListener('change', () => {
                    updateProgress();
                    saveData();
                });
            });

            // Event listener para campos de texto
            const inputs = document.querySelectorAll('input[type="text"]');
            inputs.forEach((input) => {
                input.addEventListener('input', saveData);
            });
        });
    </script>
</body>
</html>

        <button class="submit-button">Guardar Agenda</button>
    </div>
</body>
</html>
