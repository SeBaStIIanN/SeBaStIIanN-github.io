<!DOCTYPE html> 
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Personal 24 Horas</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #333; /* Fondo gris oscuro */
            color: white; /* Letras blancas */
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background-color: #444; /* Fondo gris más oscuro para el contenedor */
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
        }
        h1 {
            text-align: center;
            color: #ffdd57; /* Título amarillo */
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #ffdd57;
            color: #333;
            font-size: 18px;
        }
        td input[type="text"] {
            width: 90%;
            padding: 5px;
            border: 2px solid #ddd;
            border-radius: 5px;
            background-color: #666;
            color: white;
        }
        td input[type="checkbox"] {
            transform: scale(1.5);
        }
        td {
            background-color: #555; /* Fondo gris oscuro para las celdas */
        }
        tr:nth-child(odd) td {
            background-color: #666; /* Fondo alterno gris más claro */
        }
        .submit-button {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #ffdd57;
            color: #333;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .submit-button:hover {
            background-color: #ffc107;
        }
        .progress {
            text-align: center;
            font-size: 18px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Mi Agenda Personal - 24 Horas</h1>
        <div class="progress">
            Progreso: <span id="progress-percent">0%</span> <!-- Muestra el progreso -->
        </div>
        <table>
            <tr>
                <th>Hora</th>
                <th>Actividad</th>
                <th>Completado</th>
            </tr>
            <!-- Generar horas del día de 05:00 AM a 04:00 AM -->
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    let table = document.querySelector('table');
                    let progressSpan = document.getElementById('progress-percent');

                    // Función para convertir la hora al formato deseado
                    function formatHour(hour) {
                        let displayHour = hour % 24;
                        let suffix = displayHour >= 5 && displayHour < 12 ? "AM" : "PM";
                        if (displayHour === 0) displayHour = 12;
                        else if (displayHour > 12) displayHour -= 12;
                        return `${displayHour}:00 - ${displayHour}:59 ${suffix}`;
                    }

                    // Cargar las actividades y estados de LocalStorage si existen
                    function loadAgenda() {
                        for (let hour = 5; hour <= 28; hour++) { // De 5:00 AM a 4:00 AM
                            let row = document.createElement('tr');
                            let hourCell = document.createElement('td');
                            let activityCell = document.createElement('td');
                            let doneCell = document.createElement('td');
                            
                            // Formatear las horas correctamente
                            let formattedHour = formatHour(hour);
                            hourCell.textContent = formattedHour;

                            // Crear campos para ingresar la actividad y marcarla como completada
                            let activityInput = document.createElement('input');
                            activityInput.type = 'text';
                            activityInput.placeholder = 'Escribe tu actividad';
                            activityInput.id = `activity-${hour}`;

                            let doneCheckbox = document.createElement('input');
                            doneCheckbox.type = 'checkbox';
                            doneCheckbox.id = `done-${hour}`;

                            // Cargar los datos de LocalStorage si existen
                            let savedActivity = localStorage.getItem(`activity-${hour}`);
                            let isChecked = localStorage.getItem(`done-${hour}`) === 'true';

                            if (savedActivity) {
                                activityInput.value = savedActivity;
                            }
                            doneCheckbox.checked = isChecked;

                            // Detectar cuando el usuario presiona "Enter" y mover el foco al siguiente campo
                            activityInput.addEventListener('keydown', function(event) {
                                if (event.key === 'Enter') {
                                    let nextActivityInput = document.getElementById(`activity-${hour + 1}`);
                                    if (nextActivityInput) {
                                        nextActivityInput.focus();
                                    }
                                }
                            });

                            // Escuchar cambios en las casillas de verificación
                            doneCheckbox.addEventListener('change', updateProgress);

                            // Agregar los elementos a la fila
                            activityCell.appendChild(activityInput);
                            doneCell.appendChild(doneCheckbox);
                            row.appendChild(hourCell);
                            row.appendChild(activityCell);
                            row.appendChild(doneCell);
                            table.appendChild(row);
                        }
                        updateProgress(); // Actualizar el progreso inicial
                    }

                    // Guardar la agenda en LocalStorage
                    function saveAgenda() {
                        for (let hour = 5; hour <= 28; hour++) {
                            let activity = document.getElementById(`activity-${hour}`).value;
                            let done = document.getElementById(`done-${hour}`).checked;

                            localStorage.setItem(`activity-${hour}`, activity);
                            localStorage.setItem(`done-${hour}`, done);
                        }
                        alert("Agenda guardada!");
                    }

                    // Actualizar el progreso de tareas completadas
                    function updateProgress() {
                        let totalTasks = 24; // 24 horas
                        let completedTasks = 0;

                        for (let hour = 5; hour <= 28; hour++) {
                            let done = document.getElementById(`done-${hour}`).checked;
                            if (done) {
                                completedTasks++;
                            }
                        }

                        let percentCompleted = Math.round((completedTasks / totalTasks) * 100);
                        progressSpan.textContent = percentCompleted + "%";

                        // Mostrar mensaje si se completa el 100% de la agenda
                        if (percentCompleted === 100) {
                            alert("¡Has completado toda tu agenda del día!");
                        }
                    }

                    // Cargar los datos al iniciar la página
                    loadAgenda();

                    // Guardar la agenda al hacer clic en el botón
                    document.querySelector('.submit-button').addEventListener('click', function () {
                        saveAgenda();
                    });
                });
            </script>
        </table>
        <br>
        <button class="submit-button">Guardar Agenda</button>
    </div>
</body>
</html>

